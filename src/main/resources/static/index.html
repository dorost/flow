<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Spaghetti Flow Design Tool</title>


    <link href="https://stackpath.bootstrapcdn.com/bootswatch/4.1.3/slate/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-ywjdn7N8uoxzIfGl7jlEBlqw2BNicOSzZDgo7A2ffvbM24Ct9plRp7KwtaIqZ33j" crossorigin="anonymous">


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-social/5.1.1/bootstrap-social.css"/>

    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"
          integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">


    <link rel="stylesheet" type="text/css" href="./app.css">

    <script src="https://code.jquery.com/jquery-3.3.1.js"
            integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
            crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.1/ace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.13.0/d3.js"></script>
    <script src="./graphlib-dot.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dagre-d3/0.6.1/dagre-d3.js"></script>


</head>

<body>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">Spaghetti Flow Design Tool</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01"
            aria-controls="navbarColor01"
            aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarColor01">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
                <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="#">About</a>
            </li>
        </ul>

        <ul class="navbar-nav mr-sm-2">
            <a class="btn btn-social-icon btn-github btn-lg" href="http://github.com/dorost/flow">
                <span class="fa fa-github"></span>
            </a>
        </ul>


    </div>
</nav>


<table width="100%" class="table table-bordered table-dark table-striped">
    <colgroup>
        <col width="15%">
        <col width="30%">
        <col width="5%">
        <col width="35%">
        <col width="15%">
    </colgroup>

    <tr>
        <td>
            <h3>List of blocks</h3>

            <div class="scroll-area" style="max-height: 450px; height: 450px;">

                <div class="list-group">
                    <div class="list-group-item list-group-item-action flex-column align-items-start active"
                         id="mainFlow">
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1">Main Flow</h5>
                        </div>
                        <p class="mb-1">This describes the main flow that will be executed.</p>
                        <small>You need to have at least one starting block.</small>
                    </div>
                    <div class="list-group-item list-group-item-action flex-column align-items-start active">
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1">Custom Actions</h5>
                        </div>
                        <p class="mb-1">Write your containers Here.</p>
                        <br>
                        <button class="badge badge-danger badge-pill">Register container as action</button>
                    </div>


                </div>
            </div>
            <br>
            <button type="button" class="btn btn-info btn-block">Register/Update Container as Action</button>


        </td>
        <td>
            <div id="editor">
[flow]
# id_prefix = "main_"
name = "Example Flow"
author = "amin@dorost.nl"

[[action]]
name = "intial action"
source = true
type = "http-get"
id = "initial-action"
next = ["new-defined-action"]

[[action]]
name = "new defined action"
type = "constant"
id = "new-defined-action"
next = ["4"]

[[branch]]
name = "branch-1"
id = "4"
on = "value"
[branch.mapping]
branch-1 = "5"
branch-2 = "6"
branch-3 = "7"

[[action]]
name = "action-3"
type = "constant"
id = "5"
next = ["7"]
[action.params]
param-4 = "value-4"


[[action]]
name = "Branch eventually came here!"
type = "constant"
id = "6"
returnAfter = false
[action.params]
"param-5" = "value-5"


[[action]]
name = "action-5"
type = "constant"
id = "7"
output-names = ["something-to-pass"] # if you dont specify this field it will pass all the data it has.
[action.params]
param-6 = "value-6"
            </div>
        </td>
        <td class="table-dark">
            <button type="button" class="btn btn-info btn-block" id="tomlToDigraph" onclick="drawGraph()">

                <h3>&#8250;</h3>
            </button>
            <br>

        </td>
        <td class="table-dark">
            <svg>
                <g></g>
            </svg>
        </td>

        <td class="table-dark">
            <div class="text-center">
                <button type="button" class="btn btn-warning btn-sm text-center" id="executeFlow">
                    Add Branch
                </button>
            </div>
            <hr>
            <h3>Actions Library:</h3>

            <div class="scroll-area" style="max-height:500px;">
                <div class="list-group" id="actions-list">
                    <div class="list-group-item list-group-item-action flex-column align-items-start active">
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1">Action Type here</h5>
                        </div>
                        <p class="mb-1">Action description here.</p>
                        <small>Input/Output docs.</small>
                        <br>
                        <button class="badge badge-info badge-pill">add this action</button>
                    </div>
                    <div class="list-group-item list-group-item-action flex-column align-items-start active">
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1">Action Type here</h5>
                        </div>
                        <p class="mb-1">Action description here.</p>
                        <small>Input/Output docs.</small>
                        <br>
                        <button class="badge badge-info badge-pill">add this action</button>
                    </div>
                    <div class="list-group-item list-group-item-action flex-column align-items-start active">
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1">Action Type here</h5>
                        </div>
                        <p class="mb-1">Action description here.</p>
                        <small>Input/Output docs.</small>
                        <br>
                        <button class="badge badge-info badge-pill">add this action</button>
                    </div>
                    <div class="list-group-item list-group-item-action flex-column align-items-start active">
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1">Action Type here</h5>
                        </div>
                        <p class="mb-1">Action description here.</p>
                        <small>Input/Output docs.</small>
                        <br>
                        <button class="badge badge-info badge-pill">add this action</button>
                    </div>
                    <div class="list-group-item list-group-item-action flex-column align-items-start active">
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1">Action Type here</h5>
                        </div>
                        <p class="mb-1">Action description here.</p>
                        <small>Input/Output docs.</small>
                        <br>
                        <button class="badge badge-info badge-pill">add this action</button>
                    </div>
                    <div class="list-group-item list-group-item-action flex-column align-items-start active">
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1">Action Type here</h5>
                        </div>
                        <p class="mb-1">Action description here.</p>
                        <small>Input/Output docs.</small>
                        <br>
                        <button class="badge badge-info badge-pill">add this action</button>
                    </div>
                    <div class="list-group-item list-group-item-action flex-column align-items-start active">
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1">Action Type here</h5>
                        </div>
                        <p class="mb-1">Action description here.</p>
                        <small>Input/Output docs.</small>
                        <br>
                        <button class="badge badge-info badge-pill">add this action</button>
                    </div>
                    <div class="list-group-item list-group-item-action flex-column align-items-start active">
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1">Action Type here</h5>
                        </div>
                        <p class="mb-1">Action description here.</p>
                        <small>Input/Output docs.</small>
                        <br>
                        <button class="badge badge-info badge-pill">add this action</button>
                    </div>
                </div>
            </div>
        </td>


    </tr>

    <tr>
        <td>
            <button hidden=true type="button" class="btn btn-warning btn-block">
                <h5>Save Flow</h5>
            </button>
            <button type="button" class="btn btn-success btn-block" id="executeFlow">
                <h5>Execute Flow</h5>
            </button>

        </td>
        <td colspan="5">

            <div class="shell-wrap">
                <p class="shell-top-bar">Execution Output From Server</p>
                <ul class="shell-body" id="shell-emulator">
                </ul>
            </div>

        </td>
    </tr>

</table>


<div class="modal" id="action-modal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="model-title">Edit Block</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="action-modal-body">
                <small id="modal-action-id">Action ID here</small>
                <br>
                <small id="modal-action-type">Action Type Here</small>
                <br>
                <small id="modal-action-description">Action Description here...</small>
                <hr>
                <b>Name: </b>
                <input class="form-control form-control-sm" type="text" placeholder="current-name"
                       id="modal-action-name">
                <hr>
                <h4>Action Params:</h4>
                <table class="table table-secondary" id="modal-action-params">

                </table>

                <hr>
                <h4>Action Output Keys:</h4>
                <table class="table table-secondary" id="modal-action-output-keys">
                    <tr>
                        <td>
                            Key Name
                        </td>
                    </tr>
                </table>
                <hr>
                <h4>Flow Related Config:</h4>
                <div class="form-check">
                    <div class="radio">
                        <label><input id="modal-action-first" class="form-check-input" type="radio" name="optionsRadios"
                                      value="First Action">
                            First
                            Action</label>
                    </div>
                    <div class="radio">
                        <label><input id="modal-action-return" class="form-check-input" type="radio"
                                      name="optionsRadios" value="Return After">
                            Return
                            After</label>
                    </div>
                    <div class="radio">
                        <label><input id="modal-action-none" class="form-check-input" type="radio" name="optionsRadios"
                                      value="None">
                            None</label>
                    </div>
                </div>

            </div>
            <div class="modal-footer">
                <button id="modal-action-save" type="button" class="btn btn-success">Save changes</button>
                <button id="modal-action-cancel" type=" button" class="btn btn-secondary" data-dismiss="modal">Cancel
                </button>
            </div>
        </div>
    </div>
</div>


<script src="./app.js"></script>


</body>

</html>